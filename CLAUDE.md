# CLAUDE.md - Linq Node SDK

## Project Overview
This is the Linq TypeScript SDK (`@linqapp/sdk`), generated from our OpenAPI spec using [Stainless](https://www.stainless.com). It provides a typed, ergonomic client for the Linq Partner API.

## Key Facts
- **Generated SDK**: Most code in `src/` is generated by Stainless. Do NOT manually edit generated files.
- **Custom code**: Commit custom files directly to `next` branch — Stainless preserves non-generated files through rebuilds.
- **OpenAPI spec**: `.stainless/openapi.yaml` is a copy of the source spec from the `synapse` repo. Keep in sync.
- **Stainless config**: `.stainless/stainless.yml` is for local CLI/language server. The build source of truth lives on Stainless's servers.
- **Target**: `typescript` (not the deprecated `node` target)

## SDK Consumer DX
```typescript
import Linq from '@linqapp/sdk';
const client = new Linq({ apiKey: 'your-token' });
const chat = await client.chats.create({ from: '+12025551234', to: ['+19876543210'], message: { parts: [{ type: 'text', value: 'Hello!' }] } });
```

## Conventions
- Package name: `@linqapp/sdk`
- License: MIT
- Server-side only (requires bearer token — never expose in browser)
- Dual ESM + CJS distribution
- Zero runtime dependencies (uses native fetch)
- Node.js 18+ (also works on Deno, Bun, Cloudflare Workers, Vercel Edge)
- Env var: `LINQ_API_KEY` for auth

## Resources (5 top-level, 26 methods)
- `client.chats.*` — Chat CRUD, voice memo, read receipts, contact card
- `client.chats.participants.*` — Add/remove participants
- `client.chats.typing.*` — Start/stop typing indicators
- `client.chats.messages.*` — Send messages to chat, list messages in chat
- `client.messages.*` — Retrieve, delete, reactions, threads (by message ID)
- `client.attachments.*` — Upload requests, metadata
- `client.phoneNumbers.*` — List available numbers
- `client.webhooks.subscriptions.*` — CRUD webhook subscriptions
- `client.webhooks.events.*` — List available event types

## Stainless Workflow
- Builds are triggered via `stl builds create --branch main` or the Studio UI
- Generated code is pushed to `next` branch, then a Release PR is created against `main`
- Merge the Release PR to publish a new version
- `stl lint` validates the config locally against the spec
- Never assume Stainless behavior — check their docs: https://www.stainless.com/docs/

## Related Repos
- `synapse` — Backend services + source OpenAPI spec (`openapi/apiservice/openapi.yaml`)
- `linq-cli` — CLI tool that dogfoods this SDK (will migrate from openapi-fetch)
